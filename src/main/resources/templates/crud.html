<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Gerenciamento - AutoGrid</title>
	<link rel="icon" href="/images/AutoGrid_logo.png">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"/>
	<link href="/header/header.css" rel="stylesheet">
	<link href="/crud/crud.css" rel="stylesheet">
</head>

<body>
    <script src="/header/header.js"></script>
    <header>
        <div class="header">
            <h1>AutoGrid</h1>
        </div>
        <ul class="sidebar">
            <div>
                <li class="sidebar-close" onclick=hideSidebar()>
                    <img src="/images/X.png">
                </li>
                <li class="sidebar-login" onclick=hideSidebar()>
                    <a th:href="@{/logout}">
                        <img src="/images/logout.png">
                    </a>
                </li>
            </div>
            <li onclick=hideSidebar()><a th:href="@{/#initial-images}"><h2>Início</h2></a></li>
            <li onclick=hideSidebar()><a th:href="@{/#destaque}"><h2>Destaque</h2></a></li>
            <li onclick=hideSidebar()><a th:href="@{/#products}"><h2>Produtos</h2></a></li>
            <li onclick=hideSidebar()><a th:href="@{/busca}"><h2>Busca</h2></a></li>
            <li onclick=hideSidebar()><a th:href="@{/#car-brands}"><h2>Marcas</h2></a></li>
            <li onclick=hideSidebar()><a th:href="@{/#contact}"><h2>Contato</h2></a></li>
        </ul>
        <div class="nav">
            <a th:href="@{/#initial-images}" class="hideOnMobile"><h2>Início</h2></a>
            <a th:href="@{/#destaque}" class="hideOnMobile"><h2>Destaque</h2></a>
            <a th:href="@{/#products}" class="hideOnMobile"><h2>Produtos</h2></a>
            <a th:href="@{/busca}" class="hideOnMobile"><h2>Busca</h2></a>
            <a th:href="@{/#car-brands}" class="hideOnMobile"><h2>Marcas</h2></a>
            <a th:href="@{/#contact}" class="hideOnMobile"><h2>Contato</h2></a>
        </div>
        <div class="login">
            <a th:href="@{/logout}" class="logoutIcon hideOnMobile"></a>
        </div>
        <li class="menu-button" onclick=showSidebar()>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 96 960 960">
                <path d="M120 816v-60h720v60H120Zm0-210v-60h720v60H120Zm0-210v-60h720v60H120Z"/>
            </svg>
        </li>
    </header>

	<main class="crud-container">
		<!-- TODO: BACKGROUND SEARCH IN CRUD PAGE -->
		<div class="container-fluid">
			<div class="breadcrumb-nav mb-4">
				<a href="index.html">Início</a> > <a href="#">Gerenciamento de Veículos</a>
			</div>

			<div class="d-flex justify-content-between align-items-center mb-4">
				<h2 class="principal-title">Veículos Cadastrados</h2>
				<button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#vehicleModal" id="btn-add-vehicle">
					<i class="bi bi-plus-circle me-2"></i>Adicionar Novo Veículo
				</button>
			</div>

			<div class="search-group input-group mb-3">
				<span class="input-group-text" id="search-addon"><i class="bi bi-search"></i></span>
				<input type="text" id="searchInput" class="form-control text-white" placeholder="Pesquisar por veículo, marca, ano, etc..." aria-label="Pesquisar" aria-describedby="search-addon">
			</div>

			<div class="table-responsive">
				<table class="table table-dark table-striped table-hover align-middle">
					<thead>
						<tr>
							<th scope="col">Imagem</th>
							<th scope="col">Veículo</th>
							<th scope="col">Preço</th>
							<th scope="col">KM</th>
							<th scope="col">Ano</th>
							<th scope="col">Marca</th>
							<th scope="col">Localização</th>
							<th scope="col" class="text-center">Ações</th>
						</tr>
					</thead>
					<tbody id="vehicle-table-body" th:remove="all-but-first">
						<tr th:each="carro : ${carros}" th:attr="data-id=${carro.id}">
							<td>
								<img th:src="${carro.imageUrl}" th:alt="${carro.titulo}" class="table-img-thumbnail">
							</td>
							<td class="vehicle-title" th:text="${carro.titulo}">Título do Veículo</td>
							<td class="vehicle-price" th:text="${#numbers.formatCurrency(carro.preco)}">R$ 0,00</td>
							<td class="vehicle-km" th:text="${#numbers.formatDecimal(carro.quilometragem, 0, 'POINT', 0, 'COMMA')}">0</td>
							<td class="vehicle-year" th:text="${carro.ano}">2024</td>
							<td class="vehicle-brand" th:text="${carro.marca}">Marca</td>
							<td class="vehicle-location" th:text="${carro.localizacao}">Localização</td>
							<td class="text-center">
								<button class="btn btn-sm btn-primary btn-edit" title="Editar"><i class="bi bi-pencil-square"></i></button>
								<button class="btn btn-sm btn-danger btn-delete" title="Excluir"><i class="bi bi-trash-fill"></i></button>
							</td>
						</tr>
						</tbody>
				</table>
			</div>
		</div>
	</main>

	<div class="modal fade" id="vehicleModal" tabindex="-1" aria-labelledby="vehicleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content bg-dark text-white">
				<div class="modal-header">
					<h5 class="modal-title" id="vehicleModalLabel">Adicionar Novo Veículo</h5>
					<button type="button" onclick="removeAllInvalid()" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form id="vehicleForm">
						<input type="hidden" id="vehicleId">
						<div class="row">
							<div class="col-lg-8 mb-3">
								<label for="formVehicleTitle" class="form-label">Título do Anúncio</label>
								<input type="text" class="form-control bg-dark text-white" id="formVehicleTitle">
								<div class="invalid-feedback">
									Por favor, digite um título.
								</div>
							</div>
							<div class="col-lg-4 mb-3">
								<label for="formVehiclePrice" class="form-label">Preço (R$)</label>
								<input type="text" placeholder="0,00" inputmode="numeric" class="form-control bg-dark text-white" id="formVehiclePrice">
								<div class="invalid-feedback">
									Por favor, digite um preço.
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-lg-4 mb-3">
								<label for="formVehicleKm" class="form-label">Quilometragem</label>
								<input type="number" min="0" class="form-control bg-dark text-white" id="formVehicleKm">
								<div class="invalid-feedback">
									Por favor, digite a kilometragem.
								</div>
							</div>
							<div class="col-lg-4 mb-3">
								<label for="formState" class="form-label">Estado</label>
								<select class="form-control bg-dark text-white" id="formState">
								</select>
								<div class="invalid-feedback">
									Por favor, selecione um estado.
								</div>
							</div>
							<div class="col-lg-4 mb-3">
								<label for="formCity" class="form-label">Cidade</label>
								<select class="form-select bg-dark text-white" id="formCity">
								</select>
								<div class="invalid-feedback">
									Por favor, selecione uma cidade.
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-lg-4 mb-3">
								<label for="formVehicleYear" class="form-label">Ano de Fabricação</label>
								<input type="number" min="1886" class="form-control bg-dark text-white" id="formVehicleYear">
								<div class="invalid-feedback">
									Por favor, digite o ano. 
								</div>
							</div>
							<div class="col-lg-4 mb-3">
								<label for="formVehicleBrand" class="form-label">Marca</label>
								<input type="text" class="form-control bg-dark text-white" id="formVehicleBrand">
								<div class="invalid-feedback">
									Por favor, digite a marca. 
								</div>
							</div>
							<div class="col-lg-4 mb-3">
								<label for="formVehicleCondition" class="form-label">Condição</label>
								<select class="form-select bg-dark text-white" id="formVehicleCondition">
									<option value="Novos">Novo</option>
									<option value="Usados">Usado</option>
								</select>
							</div>
						</div>
						<div class="mb-3">
							<label for="formVehicleImage" class="form-label">URL da Imagem Principal</label>
							<input type="url" class="form-control bg-dark text-white" id="formVehicleImage" placeholder="https://...">
								<div class="invalid-feedback">
									Por favor, digite uma URL. 
								</div>
						</div>
						<div class="mb-3">
							<label for="formVehicleImage2" class="form-label">URL da Segunda Imagem (opcional)</label>
							<input type="url" class="form-control bg-dark text-white" id="formVehicleImage2" placeholder="https://...">
						</div>
						<div class="mb-3">
							<label for="formVehicleImage3" class="form-label">URL da Terceira Imagem (opcional)</label>
							<input type="url" class="form-control bg-dark text-white" id="formVehicleImage3" placeholder="https://...">
						</div>
						<div class="mb-3">
							<label for="formVehicleImage4" class="form-label">URL da Quarta Imagem (opcional)</label>
							<input type="url" class="form-control bg-dark text-white" id="formVehicleImage4" placeholder="https://...">
						</div>
						<div class="mb-3">
							<label for="formVehicleShortDescription" class="form-label">Descrição Curta</label>
							<textarea class="form-control bg-dark text-white" id="formVehicleShortDescription" rows="2"></textarea>
								<div class="invalid-feedback">
									Por favor, digite uma descrição. 
								</div>
						</div>
						<div class="mb-3">
							<label for="formVehicleLongDescription" class="form-label">Descrição Detalhada</label>
							<textarea class="form-control bg-dark text-white" id="formVehicleLongDescription" rows="4"></textarea>
								<div class="invalid-feedback">
									Por favor, digite uma descrição. 
								</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" onclick="removeAllInvalid()" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
					<button type="submit" class="btn btn-primary" form="vehicleForm" id="btn-save-vehicle">Salvar Alterações</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-labelledby="deleteConfirmModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content bg-dark text-white">
				<div class="modal-header">
					<h5 class="modal-title" id="deleteConfirmModalLabel">Confirmar Exclusão</h5>
					<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<p>Você tem certeza que deseja excluir o veículo <strong id="vehicle-to-delete-name"></strong>?</p>
					<p class="text-danger">Esta ação não pode ser desfeita.</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
					<button type="button" class="btn btn-danger" id="btn-confirm-delete">Excluir</button>
				</div>
			</div>
		</div>
	</div>

  <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script src="crud/func.js"></script>
</body>

</html>